{% extends 'appRecipesStore/base.html' %}
{% load static %}

{% block title %}Recetas - Recipes Store{% endblock %}

{% block content %}
<main class="main">

    <!-- Page Title -->
    <div class="page-title light-background">
        <div class="container">
            <h1>Todas las Recetas</h1>
            <nav class="breadcrumbs">
                <ol>
                    <li><a href="{% url 'home' %}">Inicio</a></li>
                    <li class="current">Recetas</li>
                </ol>
            </nav>
        </div>
    </div><!-- End Page Title -->

    <!-- Menu Section -->
    <section id="menu" class="menu section">
        <div class="container section-title" data-aos="fade-up">
            <h2>Nuestra Colección de Recetas</h2>
            <p>Explora todas nuestras deliciosas recetas organizadas para ti</p>
        </div>
        <!-- Buscador -->
        <div class="container text-center mb-5">
            <div style="
                max-width: 450px;
                margin: auto;
                position: relative;
            ">
                <i class="bi bi-search" style="
                    position: absolute;
                    top: 50%;
                    left: 15px;
                    transform: translateY(-50%);
                    font-size: 1.2rem;
                    color: #ff6a00;
                "></i>
                <input id="buscador" type="text" 
                    class="form-control"
                    placeholder="Buscar una receta..."
                    style="
                        padding: 12px 20px 12px 45px;
                        border-radius: 50px;
                        border: 2px solid #ff6a00;
                        box-shadow: 0 4px 12px rgba(255,106,0,0.15);
                        transition: 0.3s ease;
                    "
                    onfocus="this.style.boxShadow='0 4px 14px rgba(255,106,0,0.3)'"
                    onblur="this.style.boxShadow='0 4px 12px rgba(255,106,0,0.15)'"
                >
            </div>
        </div>
        <!-- Lista que se actualizará con AJAX -->
        <div id="lista_recetas">
            {% include 'appRecipesStore/partials/recetas_list.html' %}
        </div>
    </section>

    <!-- AJAX -->
    <script>
        document.getElementById('buscador').addEventListener('keyup', function () {
            let query = this.value;

            fetch(`/buscar_recetas/?q=${query}`)
                .then(response => response.text())
                .then(html => {
                    document.getElementById('lista_recetas').innerHTML = html;
                });
        });
    </script>

</main>
{% endblock %}